<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1165" height="1112" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Browser->Web App: "/secret-page"
Web App->Browser: 302 "http://authserver/login"
Browser->Auth Server: GET "/login"
Browser->Auth Server: POST "/login"\nwith username & password
Auth Server->Auth Server: authenticate
Auth Server->Browser: 302\n"/oauth/authorize?client_id=web-app"
Browser->Auth Server: GET\n""/oauth/authorize?client_id=web-app""
Note right of Browser: Optional Step:\nPage to authorize "web-app"\naccess to user info.
Auth Server->Browser: 302\n"http://web-app/login?code=secret_code"
Browser->Web App: GET "/login?code=secret_code"
Web App->Auth Server: POST\n"/oauth/token?code=secret_code"
Auth Server->Web App: Signed JWT Token
Note right of Web App: Store token in session
Web App->Browser: 302 "/secret-page"
Browser->Web App: GET "/secret-page"
Browser->Web App: GET "ajax://secret-resource"
Web App->Microservice: Proxy GET "/secret-resource"+JWT
Microservice->Microservice: Verify JWT signature\nusing the Public Key
Microservice->Microservice: User Authorized?
Microservice->Web App: Secret Resource (JSON)
Web App->Browser: Secret Resource (JSON)



]]></source><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with RaphaÃ«l 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock55-obj47525" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47528" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47531" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47534" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47539" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47542" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47545" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47551" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47554" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47557" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47560" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47566" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47569" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47572" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47575" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47580" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47585" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47588" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker><marker id="raphael-marker-endblock55-obj47591" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="10" y="20" width="87.203125" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="19.984375" y="30.109375" width="67.203125" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="53.6015625" y="39.109375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Browser</tspan></text><rect x="10" y="1054.34375" width="87.203125" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="19.984375" y="1064.453125" width="67.203125" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="53.6015625" y="1073.453125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Browser</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,58.21875L53.6015625,1054.34375" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="319.234375" y="20" width="87.203125" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="329.21875" y="30" width="67.203125" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="362.8359375" y="39.109375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Web App</tspan></text><rect x="319.234375" y="1054.34375" width="87.203125" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="329.21875" y="1064.34375" width="67.203125" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="362.8359375" y="1073.453125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Web App</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,58.21875L362.8359375,1054.34375" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="617.671875" y="20" width="125.609375" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="627.65625" y="30.109375" width="105.609375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="680.4765625" y="39.109375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Auth Server</tspan></text><rect x="617.671875" y="1054.34375" width="125.609375" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="627.65625" y="1064.453125" width="105.609375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="680.4765625" y="1073.453125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Auth Server</tspan></text><path fill="none" stroke="#000000" d="M680.4765625,58.21875L680.4765625,1054.34375" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="768.0859375" y="20" width="135.21875" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="778.078125" y="30.109375" width="115.21875" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="835.6953125" y="39.109375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Microservice</tspan></text><rect x="768.0859375" y="1054.34375" width="135.21875" height="38.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="778.078125" y="1064.453125" width="115.21875" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="835.6953125" y="1073.453125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Microservice</tspan></text><path fill="none" stroke="#000000" d="M835.6953125,58.21875L835.6953125,1054.34375" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="141" y="74.109375" width="134.421875" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="83.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">"/secret-page"</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,96.4375C53.6015625,96.4375,318.0086862591561,96.4375,357.83759137619694,96.4375" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47525)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="68.984375" y="112.328125" width="278.4375" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="121.4375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">302 "http://authserver/login"</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,134.65625C362.8359375,134.65625,98.4288137408439,134.65625,58.59990862380306,134.65625" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47528)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="309.421875" y="150.546875" width="115.21875" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="367.0390625" y="159.65625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">GET "/login"</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,172.875C53.6015625,172.875,616.3941126391292,172.875,675.4763383617428,172.875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47531)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="251.8125" y="179.171875" width="230.4375" height="37.40625" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="367.0390625" y="197.875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.703125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">POST "/login"</tspan><tspan dy="19.2" x="367.0390625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">with username &amp; password</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,230.28125C53.6015625,230.28125,616.3941126391292,230.28125,675.4763383617428,230.28125" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47534)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="705.46875" y="250.28125" width="115.21875" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="763.0859375" y="259.28125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">authenticate</tspan></text><path fill="none" stroke="#000000" d="M680.4765625,245.28125L700.4765625,245.28125" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M700.4765625,245.28125L700.4765625,278.28125" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M700.4765625,278.28125C700.4765625,278.28125,691.3956756591797,278.28125,685.4718158841133,278.28125" stroke-width="2" stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj47539)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="194.203125" y="274.4375" width="345.65625" height="37.6875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="367.0390625" y="293.28125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.8359375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">302</tspan><tspan dy="19.2" x="367.0390625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">"/oauth/authorize?client_id=web-app"</tspan></text><path fill="none" stroke="#000000" d="M680.4765625,325.953125C680.4765625,325.953125,117.68401236087084,325.953125,58.60178663825718,325.953125" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47542)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="184.609375" y="332.109375" width="364.859375" height="37.6875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="367.0390625" y="350.953125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.8359375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">GET</tspan><tspan dy="19.2" x="367.0390625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">""/oauth/authorize?client_id=web-app""</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,383.625C53.6015625,383.625,616.3941126391292,383.625,675.4763383617428,383.625" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47545)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="73.6015625" y="403.625" width="269.234375" height="66.390625" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="78.59375" y="408.625" width="259.234375" height="56.390625" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="436.8203125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-13.1953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Optional Step:</tspan><tspan dy="19.2" x="208.21875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Page to authorize "web-app"</tspan><tspan dy="19.2" x="208.21875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">access to user info.</tspan></text><rect x="179.796875" y="476.171875" width="374.453125" height="37.6875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="367.0390625" y="495.015625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.8359375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">302</tspan><tspan dy="19.2" x="367.0390625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">"http://web-app/login?code=secret_code"</tspan></text><path fill="none" stroke="#000000" d="M680.4765625,527.6875C680.4765625,527.6875,117.68401236087084,527.6875,58.60178663825718,527.6875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47551)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="68.984375" y="543.4375" width="278.4375" height="18.484375" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="552.6875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.7578125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">GET "/login?code=secret_code"</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,566.171875C53.6015625,566.171875,318.0086862591561,566.171875,357.83759137619694,566.171875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47554)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="372.828125" y="572.328125" width="297.640625" height="37.6875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="521.65625" y="591.171875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.8359375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">POST</tspan><tspan dy="19.2" x="521.65625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">"/oauth/token?code=secret_code"</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,623.84375C362.8359375,623.84375,635.0046924448106,623.84375,675.4711894568686,623.84375" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47557)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="444.84375" y="639.734375" width="153.625" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="521.65625" y="648.84375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Signed JWT Token</tspan></text><path fill="none" stroke="#000000" d="M680.4765625,662.0625C680.4765625,662.0625,408.30780755518936,662.0625,367.8413105431313,662.0625" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47560)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="382.8359375" y="682.0625" width="221.234375" height="28" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="387.828125" y="687.0625" width="211.234375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="493.453125" y="696.0625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Store token in session</tspan></text><rect x="121.796875" y="725.953125" width="172.828125" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="735.0625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">302 "/secret-page"</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,748.28125C362.8359375,748.28125,98.4288137408439,748.28125,58.59990862380306,748.28125" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47566)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="121.796875" y="764.171875" width="172.828125" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="773.28125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">GET "/secret-page"</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,786.5C53.6015625,786.5,318.0086862591561,786.5,357.83759137619694,786.5" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47569)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="73.796875" y="802.390625" width="268.84375" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="811.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">GET "ajax://secret-resource"</tspan></text><path fill="none" stroke="#000000" d="M53.6015625,824.71875C53.6015625,824.71875,318.0086862591561,824.71875,357.83759137619694,824.71875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47572)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="445.640625" y="840.609375" width="307.25" height="18.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="599.265625" y="849.71875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.890625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Proxy GET "/secret-resource"+JWT</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,862.9375C362.8359375,862.9375,780.1684641242027,862.9375,830.7048247701023,862.9375" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47575)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="860.6875" y="882.9375" width="192.03125" height="37.40625" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="956.7109375" y="901.640625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-3.703125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Verify JWT signature</tspan><tspan dy="19.2" x="956.7109375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">using the Public Key</tspan></text><path fill="none" stroke="#000000" d="M835.6953125,877.9375L855.6953125,877.9375" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M855.6953125,877.9375L855.6953125,930.34375" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M855.6953125,930.34375C855.6953125,930.34375,846.6144256591797,930.34375,840.6905658841133,930.34375" stroke-width="2" stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj47580)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="860.6875" y="940.34375" width="153.625" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="937.5078125" y="949.34375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">User Authorized?</tspan></text><path fill="none" stroke="#000000" d="M835.6953125,935.34375L855.6953125,935.34375" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M855.6953125,935.34375L855.6953125,968.34375" stroke-width="2" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M855.6953125,968.34375C855.6953125,968.34375,846.6144256591797,968.34375,840.6905658841133,968.34375" stroke-width="2" stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj47585)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="493.640625" y="974.34375" width="211.234375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="599.265625" y="983.34375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Secret Resource (JSON)</tspan></text><path fill="none" stroke="#000000" d="M835.6953125,996.34375C835.6953125,996.34375,418.3627858757973,996.34375,367.8264252298977,996.34375" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47588)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="102.59375" y="1012.34375" width="211.234375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="208.21875" y="1021.34375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Secret Resource (JSON)</tspan></text><path fill="none" stroke="#000000" d="M362.8359375,1034.34375C362.8359375,1034.34375,98.4288137408439,1034.34375,58.59990862380306,1034.34375" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj47591)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>